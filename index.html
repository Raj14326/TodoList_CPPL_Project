<DOCTYPE! HTML>
  <html>

  <head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
      integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
      crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <style type="text/css">
      body {
        /*background-color: #6610f2;*/
        background: linear-gradient(-120deg, #021B79, #0575E6, #205E9B);

        font-size: 1rem;
      }

      label {
        margin-top: 15rem;
      }

      .lead {
        font-size: 2rem;
      }

      ul {
        list-style: none;
        margin-top: 2rem;
        border-top: 2px solid white;

      }

      li {
        border-bottom: 1px solid white;
        padding-top: 0.5rem;
        padding-bottom: 0.5rem;
      }

      .strikethrough:checked+span {
        text-decoration: line-through
      }
    </style>


  </head>

  <body>
    <div class="container pt-5">
      <form class="col-8 mx-auto pt-5">
        <p for="note" class="display-1 text-center pt-5"> You can write it here </p>
        <p class="lead text-center">You can keep track of everything you do</p>
        <input name="notes" id="task" placeholder="Input here" id="note" type="text" class="form-control col-xs-4"
          aria-label="Sizing example input" aria-describedby="inputGroup-sizing-lg">
        </input>
        <br><br>
        <div class="col-md-50 text-center">
          <button type="button" class="btn btn-primary btn-lg text-center" id="sub" onclick="func();">Submit</button>
        </div>
      </form>
      <br><br>
      <div class="row">
        <ul class="todoitems text-center"></ul>
      </div>
    </div>
  </body>
  <script>
    var data = [];
    try {
      var x = JSON.parse(localStorage.getItem('todos'));
      if (!x) {
      }
      else {
        for (let i = 0; i < x.length; i++) {
          const element = x[i];
          data.push(element);
        }
      }
    }
    catch (e) {
      console.log('op');
    }
    const todoItemsList = document.querySelector('.todoitems');
    function func() {
      const task = document.getElementById("task").value;
      var todo = {
        id: Date.now(),
        name: task,
        completed: false
      };
      data.push(todo);
      addToLocalStorage(data)
      document.getElementById("task").value = ''
    }
    function renderTodos(todos) {
      todoItemsList.innerHTML = '';
      todos.forEach(function (item) {
        const checked = item.completed ? 'checked' : null;
        const li = document.createElement('li');
        li.setAttribute('class', 'item');
        li.setAttribute('data-key', item.id);
        if (item.completed === true) {
          li.classList.add('checked');
        }

        li.innerHTML = `
        <div class="btn-group" role="group" aria-label="Basic mixed styles example" style="max-width:500px">

      <input class=" form-check-input strikethrough text-center" type="checkbox" value="" aria-label="Checkbox for following text input" onclick="sup(${item.id});" ${checked}>
      <span class="text-center  font-monospace fs-4 text-white  rounded-pill-left border-right-0 " style="width: 6rem ;">${item.name}</span>
      <button type="button" id="${item.id + 'del'}" class="btn btn-danger" onclick="func2(${item.id})">Delete</button>
      <button type="button" id="${item.id + 'ed'}" class="btn btn-primary">Edit</button>
  <button type="button" id="${item.id + 'do'}" class="btn btn-success">Done</button>
</div>

    `;
        todoItemsList.append(li);
      });

    }
    function addToLocalStorage(todos) {
      localStorage.setItem('todos', JSON.stringify(todos));
      renderTodos(todos);
    }
    function getFromLocalStorage() {
      const reference = localStorage.getItem('todos');
      if (reference) {
        todos = JSON.parse(reference);
        renderTodos(todos);
      }
    }
    function func2(id) {
      var temp = JSON.parse(localStorage.getItem('todos'));
      for (let i = 0; i < temp.length; i++) {
        if (id === temp[i].id) {
          temp.splice(i, 1);
          addToLocalStorage(temp)
          data.splice(i, 1);
        }
      }
    }
    function sup(id) {
      document.getElementById(id + "del").classList = 'btn btn-danger disabled';
      document.getElementById(id + "ed").classList = 'btn btn-primary disabled';
      document.getElementById(id + "do").classList = 'btn btn-success disabled';
    }
    getFromLocalStorage();
  </script>

  </html>